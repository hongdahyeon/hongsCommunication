<th:block th:fragment="menu">
    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

        <!-- Sidebar - Brand -->
        <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/">
            <div class="sidebar-brand-icon rotate-n-15">
                <i class="fas fa-laugh-wink"></i>
            </div>
            <div class="sidebar-brand-text mx-3">Hongs Community<sup>1</sup></div>
        </a>

        <!-- Divider -->
        <hr class="sidebar-divider my-0">

        <th:block th:each="menu : ${#authentication.principal.user.menu}">

            <th:block th:if="${menu.upperMenuUid == null and #lists.size(menu.children) > 0}">
                <li class="nav-item">
                    <a class="nav-link collapsed" th:id="|menu${menu.menuUid}|" href="#" data-toggle="collapse" th:data-target="|#child${menu.menuUid}|" aria-expanded="false" th:aria-controls="|child${menu.menuUid}|">
                        <i class="fas fa-fw fa-folder"></i>
                        <span th:text="${menu.menuText}"></span>
                    </a>
                    <div th:id="|child${menu.menuUid}|" class="collapse" >
                        <div class="bg-white py-2 collapse-inner rounded">
                            <th:block th:each="child : ${menu.children}">
                                <a class="collapse-item" th:href="${child.menuUrl}" th:text="${child.menuText}"></a>
                            </th:block>
                        </div>
                    </div>
                </li>
            </th:block>

            <th:block th:if="${menu.upperMenuUid == null and #lists.size(menu.children) == 0}">
                <li class="nav-item">
                    <a class="nav-link" th:href="${menu.menuUrl}" th:id="|menu${menu.menuUid}|">
                        <i class="fas fa-fw fa-folder"></i>
                        <span th:text="${menu.menuText}"></span></a>
                </li>
            </th:block>

        </th:block>

    </ul>
    <!-- End of Sidebar -->
</th:block>